<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enfolded Media | Multilingual Design</title>
  <link rel="shortcut icon" type="image/png" href="images/favicon.png">
  <meta name="description" content="Designing for impact in a multicultural Britain, we use language as a bridge to connect and help you reach new audiences.">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Unified Modern CSS -->
  <link rel="stylesheet" href="css/unified.css">
</head>
<body class="packages-page">
  <!-- Modern Header -->
  <header class="modern-header">
    <div class="container">
      <div class="header-content">
        <a href="index.html" class="logo-link">
          <img src="https://cdn.enfoldedmedia.com/enfolded-images/logo.png" alt="Enfolded Media" class="logo">
        </a>
        
        <nav class="nav-menu" id="navMenu">
          <a href="index.html" class="nav-link">
            Home
          </a>
          <a href="packages.html" class="nav-link active">
            Packages
          </a>
          <a href="index.html#contact" class="nav-link">
            Contact
          </a>
        </nav>
        
        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" id="mobileMenuToggle">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </div>
  </header>

  <!-- Mobile Menu Overlay -->
  <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>
  
  <!-- Mobile Menu -->
  <nav class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-content">
      <div class="mobile-menu-header">
        <button class="mobile-menu-close" id="mobileMenuClose">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      
      <div class="mobile-nav-links">
        <a href="index.html" class="mobile-nav-link">Home</a>
        <a href="packages.html" class="mobile-nav-link active">Packages</a>
        <a href="index.html#contact" class="mobile-nav-link">Contact</a>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero-redesigned hero-compact">
    <div class="container">
      <div class="hero-content">
        <h1>Our Design Packages</h1>
        <p class="hero-subtitle">Professional design solutions tailored for multicultural businesses</p>
      </div>
    </div>
  </section>

  <!-- Search and Filter -->
  <section class="section" style="padding-bottom: 0;">
    <div class="container">
      <!-- Search Bar -->
      <div class="search-container">
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input type="text" id="package-search" placeholder="Search services... (e.g. logo design, website, poster)">
        </div>
      </div>
    </div>
  </section>

  <!-- Packages Grid -->
  <section class="section">
    <div class="container">
      <!-- Results Info -->
      <div id="results-info" class="results-info">
        <span id="results-count">Loading services...</span>
      </div>
      
      <div id="packages-container" class="packages-grid">
        <!-- Packages will be dynamically rendered here -->
      </div>
      
      <!-- Pagination -->
      <div id="pagination" class="pagination" style="display: none;">
        <button id="prev-btn" class="pagination-btn" disabled>
          <i class="fas fa-chevron-left"></i> Previous
        </button>
        <span id="page-info" class="page-info">Page 1 of 1</span>
        <button id="next-btn" class="pagination-btn" disabled>
          Next <i class="fas fa-chevron-right"></i>
        </button>
      </div>
      
      <div id="no-results" class="no-results" style="display: none;">
        <i class="fas fa-search"></i>
        <h3>No services found</h3>
        <p>Try adjusting your search or selecting a different category.</p>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta-section">
    <div class="container">
      <h2>Need Something Custom?</h2>
      <p>Every business is unique. Let's discuss your specific requirements and create a tailored solution.</p>
      <div class="cta-buttons">
        <a href="https://wa.me/447836319635?text=Hello%2C%20I%20would%20like%20a%20custom%20quote" class="btn btn-primary">Get Custom Quote</a>
        <a href="index.html#contact" class="btn btn-secondary">Contact Us</a>
      </div>
    </div>
  </section>

  <!-- Modern Minimalist Footer -->
  <footer class="modern-minimalist-footer">
    <div class="footer-container">
      <!-- Main Footer Content -->
      <div class="footer-main">
        <!-- Brand Section (Center) -->
        <div class="footer-brand">
          <img src="https://cdn.enfoldedmedia.com/enfolded-images/logo.png" alt="Enfolded Media" class="footer-brand-logo">
          <p class="footer-motto">multilingual. impactful. designed for your audience.</p>
          <!-- Navigation Links -->
          <nav class="footer-nav">
            <a href="index.html" class="footer-nav-link">Home</a>
            <a href="privacy.html" class="footer-nav-link">Privacy Policy</a>
            <a href="packages.html" class="footer-nav-link">Packages</a>
            <a href="index.html#contact" class="footer-nav-link">Contact</a>
            <a href="multilingual" class="footer-nav-link">Multilingual.click</a>
          </nav>
        </div>
        
        <!-- Social Media Section (Right) -->
        <div class="footer-social">
          <div class="social-icons">
            <a href="https://www.facebook.com/enfoldedteam" class="social-icon" title="Follow us on Facebook" aria-label="Facebook">
              <i class="fab fa-facebook-f"></i>
            </a>
            <a href="https://www.twitter.com/enfoldedteam" class="social-icon" title="Follow us on X (Twitter)" aria-label="Twitter">
              <i class="fab fa-twitter"></i>
            </a>
            <a href="https://www.instagram.com/enfoldedteam" class="social-icon" title="Follow us on Instagram" aria-label="Instagram">
              <i class="fab fa-instagram"></i>
            </a>
            <a href="https://www.youtube.com/@enfoldedteam" class="social-icon" title="Follow us on YouTube" aria-label="YouTube">
              <i class="fab fa-youtube"></i>
            </a>
          </div>
        </div>
      </div>
      
      <!-- Copyright -->
      <div class="footer-copyright">
        <p>&copy; <span id="copyright-year">2025</span> Enfolded Media. All rights reserved.</p>
      </div>
    </div>
    
    <!-- Gradient Effect -->
    <div class="footer-gradient"></div>
  </footer>

  <!-- JavaScript -->
  <script src="js/copyright.js"></script>
  <script>
    // Global variables
    let packages = [];
    let currentSearch = '';
    let currentPage = 1;
    const packagesPerPage = 9; // 3x3 grid

    function matchesSearch(pkg, searchTerm) {
      if (!searchTerm) return true;
      
      const text = `${pkg.name} ${pkg.shortDescription} ${pkg.longDescription}`.toLowerCase();
      const terms = searchTerm.toLowerCase().split(' ');
      
      return terms.every(term => text.includes(term));
    }
    
    function updateResultsInfo(filteredCount, totalCount) {
      const resultsInfo = document.getElementById('results-count');
      if (resultsInfo) {
        if (currentSearch) {
          resultsInfo.textContent = `Found ${filteredCount} service${filteredCount !== 1 ? 's' : ''} matching "${currentSearch}"`;
        } else {
          resultsInfo.textContent = `Showing ${filteredCount} service${filteredCount !== 1 ? 's' : ''}`;
        }
      }
    }
    
    function updatePagination(filteredPackages) {
      const pagination = document.getElementById('pagination');
      const prevBtn = document.getElementById('prev-btn');
      const nextBtn = document.getElementById('next-btn');
      const pageInfo = document.getElementById('page-info');
      
      const totalPages = Math.ceil(filteredPackages.length / packagesPerPage);
      
      if (totalPages <= 1) {
        pagination.style.display = 'none';
        return;
      }
      
      pagination.style.display = 'flex';
      
      // Update page info
      pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
      
      // Update button states
      prevBtn.disabled = currentPage === 1;
      nextBtn.disabled = currentPage === totalPages;
      
      // Remove old event listeners and add new ones
      prevBtn.onclick = () => {
        if (currentPage > 1) {
          currentPage--;
          renderPackages();
        }
      };
      
      nextBtn.onclick = () => {
        if (currentPage < totalPages) {
          currentPage++;
          renderPackages();
        }
      };
    }
    
    function renderPackages() {
      console.log('renderPackages called');
      const container = document.getElementById('packages-container');
      const noResults = document.getElementById('no-results');
      
      console.log('Container:', container);
      console.log('Packages array:', packages.length, 'items');
      
      if (!container) {
        console.error('packages-container not found!');
        return;
      }
      
      if (!packages || packages.length === 0) {
        console.error('No packages data available');
        return;
      }
      
      // Filter packages (only by search, no category filters)
      const filteredPackages = packages.filter(pkg => 
        matchesSearch(pkg, currentSearch)
      );
      
      // Update results info
      updateResultsInfo(filteredPackages.length, packages.length);
      
      // Handle no results
      if (filteredPackages.length === 0) {
        container.style.display = 'none';
        noResults.style.display = 'block';
        document.getElementById('pagination').style.display = 'none';
        return;
      }
      
      // Show container and hide no results
      container.style.display = 'grid';
      noResults.style.display = 'none';
      
      // Calculate pagination
      const totalPages = Math.ceil(filteredPackages.length / packagesPerPage);
      if (currentPage > totalPages) currentPage = 1;
      
      const startIndex = (currentPage - 1) * packagesPerPage;
      const endIndex = startIndex + packagesPerPage;
      const packagesToShow = filteredPackages.slice(startIndex, endIndex);
      
      // Clear container
      container.innerHTML = '';
      
      // Render packages for current page
      packagesToShow.forEach(pkg => {
        const div = document.createElement('div');
        div.className = 'package-card';
        
        // Generate features list dynamically from packageFeatures
        let featuresHTML = '';
        if (pkg.packageFeatures && pkg.packageFeatures.length > 0) {
          featuresHTML = pkg.packageFeatures.slice(0, 3).map(feature => `<li>${feature}</li>`).join('');
          
          // Add hosting as additional feature if it exists
          if (pkg.hosting && pkg.packageFeatures.length < 3) {
            featuresHTML += `<li>${pkg.hosting}</li>`;
          }
        } else {
          // Fallback for packages without packageFeatures defined
          featuresHTML = `
            <li>Professional design</li>
            <li>Multiple revisions</li>
            <li>Fast delivery (3-5 days)</li>
          `;
        }
        
        div.innerHTML = `
          <div class="package-header">
            <h3 class="package-title">${pkg.name}</h3>
            <p class="package-description">${pkg.shortDescription}</p>
          </div>
          <div class="package-price">${pkg.price}</div>
          <ul class="package-features">
            ${featuresHTML}
          </ul>
          <a class="btn btn-primary" href="details.html?id=${pkg.id}" style="width: 100%; justify-content: center;">View Details</a>
        `;
        container.appendChild(div);
      });
      
      // Update pagination
      updatePagination(filteredPackages);
    }
    
    // Setup search functionality
    function setupSearch() {
      const searchInput = document.getElementById('package-search');
      
      if (searchInput) {
        searchInput.addEventListener('input', function() {
          currentSearch = this.value;
          currentPage = 1; // Reset to first page when searching
          renderPackages();
        });
      }
    }

    // Load and render packages
    console.log('Starting to load packages...');
    fetch('js/packages.json')
      .then(response => {
        console.log('Fetch response received:', response.status);
        return response.json();
      })
      .then(data => {
        console.log('Packages loaded:', data.length, 'packages');
        packages = data;
        
        // Initialize everything when DOM is ready
        if (document.readyState === 'loading') {
          console.log('DOM still loading, waiting...');
          document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing...');
            renderPackages();
            setupSearch();
          });
        } else {
          console.log('DOM ready, initializing immediately...');
          renderPackages();
          setupSearch();
        }
      })
      .catch(error => {
        console.error('Error loading packages:', error);
        // Show error message to user
        const resultsInfo = document.getElementById('results-count');
        if (resultsInfo) {
          resultsInfo.textContent = 'Error loading services. Please refresh the page.';
        }
      });
    
    // Mobile menu functionality
    document.addEventListener('DOMContentLoaded', function() {
      const mobileMenuToggle = document.getElementById('mobileMenuToggle');
      const mobileMenu = document.getElementById('mobileMenu');
      const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
      const body = document.body;
      
      function toggleMobileMenu() {
        const isOpen = mobileMenu.classList.contains('active');
        
        if (isOpen) {
          mobileMenu.classList.remove('active');
          mobileMenuOverlay.classList.remove('active');
          mobileMenuToggle.classList.remove('active');
          body.classList.remove('menu-open');
        } else {
          mobileMenu.classList.add('active');
          mobileMenuOverlay.classList.add('active');
          mobileMenuToggle.classList.add('active');
          body.classList.add('menu-open');
        }
      }
      
      if (mobileMenuToggle) {
        mobileMenuToggle.addEventListener('click', toggleMobileMenu);
      }
      if (mobileMenuOverlay) {
        mobileMenuOverlay.addEventListener('click', toggleMobileMenu);
      }
      
      // Close menu when clicking on the close button
      const mobileMenuClose = document.getElementById('mobileMenuClose');
      if (mobileMenuClose) {
        mobileMenuClose.addEventListener('click', toggleMobileMenu);
      }
      
      // Close menu when clicking on a link
      document.querySelectorAll('.mobile-nav-link').forEach(link => {
        link.addEventListener('click', function() {
          if (this.getAttribute('href').startsWith('#')) {
            toggleMobileMenu();
          }
        });
      });
      
      // Header scroll effect
      window.addEventListener('scroll', function() {
        const header = document.querySelector('.modern-header');
        if (window.scrollY > 100) {
          header.style.background = 'rgba(255, 255, 255, 0.98)';
          header.style.boxShadow = '0 4px 6px -1px rgb(0 0 0 / 0.1)';
        } else {
          header.style.background = 'rgba(255, 255, 255, 0.95)';
          header.style.boxShadow = 'none';
        }
      });
    });
  </script>
</body>
</html>