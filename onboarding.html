<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enfolded Media | Multilingual Design</title>
  <link rel="shortcut icon" type="image/png" href="images/favicon.png">
  <meta name="description" content="Designing for impact in a multicultural Britain, we use language as a bridge to connect and help you reach new audiences.">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Unified Modern CSS -->
  <link rel="stylesheet" href="css/unified.css">
  
  <!-- Load onboarding config -->
  <script>
    // Load onboarding configuration
    let onboardingConfig;
    fetch('config/onboarding.json')
      .then(response => response.json())
      .then(data => {
        onboardingConfig = data;
        initializeOnboarding();
      })
      .catch(error => console.error('Error loading onboarding config:', error));

    // Load packages data to get package details
    let packages;
    fetch('js/packages.json')
      .then(response => response.json())
      .then(data => {
        packages = data;
        initializeOnboarding();
      })
      .catch(error => console.error('Error loading packages:', error));

    function initializeOnboarding() {
      // Wait until both configs are loaded
      if (!onboardingConfig || !packages) return;

      // Get package ID from URL or hidden field
      const params = new URLSearchParams(window.location.search);
      const packageId = params.get('package') || document.querySelector('input[name="package_id"]')?.value;

      if (!packageId) {
        // Show hero if no package specified
        document.getElementById('onboarding-container').innerHTML = `
          <section class="hero-redesigned">
            <div class="container">
              <div class="hero-content">
                <h1 id="title">No Product Specified</h1>
                <p class="hero-description">Let's get your project started with these simple steps</p>
              </div>
            </div>
          </section>
        `;
        return;
      }

      // Find the package
      const pkg = packages.find(p => p.id === packageId);
      if (!pkg) {
        showError('Package not found. Please contact support.');
        return;
      }

      // Get the corresponding onboarding form
      const formConfig = onboardingConfig[packageId];
      if (!formConfig) {
        showError('No onboarding form found for this package. Please contact support.');
        return;
      }

      // Update page title and description
      document.getElementById('onboarding-title').textContent = formConfig.title;
      document.getElementById('onboarding-description').textContent = formConfig.description;

      // Build the form
      const form = document.getElementById('onboarding-form');
      form.innerHTML = '';

      // Add hidden package ID field
      const hiddenField = document.createElement('input');
      hiddenField.type = 'hidden';
      hiddenField.name = 'package_id';
      hiddenField.value = packageId;
      form.appendChild(hiddenField);

      // Add redirect URL field
      const redirectField = document.createElement('input');
      redirectField.type = 'hidden';
      redirectField.name = '_next';
      redirectField.value = window.location.origin + '/thank-you.html';
      form.appendChild(redirectField);

      buildForm(form, formConfig.fields);
    }

    function buildForm(form, fields) {
      fields.forEach(field => {
        const fieldContainer = document.createElement('div');
        fieldContainer.className = 'form-field';

        if (field.type === 'info') {
          // Info message
          const info = document.createElement('div');
          info.className = 'info-message';
          info.innerHTML = field.text;
          fieldContainer.appendChild(info);
        } else {
          // Label
          const label = document.createElement('label');
          label.textContent = field.label;
          if (field.required) label.innerHTML += ' <span class="required">*</span>';
          label.className = 'styled-label';
          fieldContainer.appendChild(label);

          // Input field
          let input;
          switch (field.type) {
            case 'checkbox': {
              const checkboxContainer = document.createElement('div');
              checkboxContainer.className = 'checkbox-group';
              field.options.forEach(option => {
                const wrapper = document.createElement('div');
                wrapper.className = 'checkbox-option';
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.name = field.name;
                checkbox.value = option;
                checkbox.id = `${field.name}-${option}`;
                checkbox.className = 'styled-input';
                const optionLabel = document.createElement('label');
                optionLabel.htmlFor = checkbox.id;
                optionLabel.textContent = option;
                wrapper.appendChild(checkbox);
                wrapper.appendChild(optionLabel);
                checkboxContainer.appendChild(wrapper);
              });
              fieldContainer.appendChild(checkboxContainer);
              break;
            }
            case 'select': {
              input = document.createElement('select');
              input.name = field.name;
              input.required = field.required;
              input.className = 'styled-input';
              const defaultOption = document.createElement('option');
              defaultOption.value = '';
              defaultOption.textContent = field.placeholder || 'Select an option';
              defaultOption.disabled = true;
              defaultOption.selected = true;
              input.appendChild(defaultOption);
              field.options.forEach(option => {
                const opt = document.createElement('option');
                opt.value = option;
                opt.textContent = option;
                input.appendChild(opt);
              });
              fieldContainer.appendChild(input);
              break;
            }
            case 'textarea':
              input = document.createElement('textarea');
              input.name = field.name;
              input.placeholder = field.placeholder;
              input.required = field.required;
              input.className = 'styled-input';
              fieldContainer.appendChild(input);
              break;
            default:
              input = document.createElement('input');
              input.type = field.type;
              input.name = field.name;
              input.placeholder = field.placeholder;
              input.required = field.required;
              input.className = 'styled-input';
              fieldContainer.appendChild(input);
          }
        }

        form.appendChild(fieldContainer);
      });

      // Add submit button
      const submitButton = document.createElement('button');
      submitButton.type = 'submit';
      submitButton.className = 'btn btn-primary';
      submitButton.textContent = 'Submit';
      form.appendChild(submitButton);
    }

    function showError(message) {
      const container = document.getElementById('onboarding-container');
      container.innerHTML = `
        <div class="error-message">
          <h2>Oops!</h2>
          <p>${message}</p>
          <p>For assistance, please email <a href="mailto:info@enfoldedmedia.com">info@enfoldedmedia.com</a></p>
        </div>
      `;
    }
  </script>
</head>
<body>
  <!-- Modern Header -->
  <header class="modern-header">
    <div class="container">
      <div class="header-content">
        <a href="index.html" class="logo-link">
          <img src="https://cdn.enfoldedmedia.com/enfolded-images/logo.png" alt="Enfolded Media" class="logo">
        </a>
        
        <nav class="nav-menu" id="navMenu">
          <a href="index.html" class="nav-link">
            Home
          </a>
          <a href="packages.html" class="nav-link">
            Packages
          </a>
          <a href="index.html#contact" class="nav-link">
            Contact
          </a>
        </nav>
        
        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" id="mobileMenuToggle">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </div>
  </header>

  <!-- Mobile Menu Overlay -->
  <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>
  
  <!-- Mobile Menu -->
  <nav class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-content">
      <div class="mobile-menu-header">
        <button class="mobile-menu-close" id="mobileMenuClose">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      
      <div class="mobile-nav-links">
        <a href="index.html" class="mobile-nav-link">Home</a>
        <a href="packages.html" class="mobile-nav-link">Packages</a>
        <a href="index.html#contact" class="mobile-nav-link">Contact</a>
      </div>
    </div>
  </nav>

  <!-- Onboarding Section (single, styled) -->
  <section class="section section-white">
    <div class="container" id="onboarding-container">
      <div class="section-header">
        <h1 id="onboarding-title" class="section-title">Loading...</h1>
        <p id="onboarding-description" class="section-subtitle"></p>
      </div>
      <form id="onboarding-form" class="onboarding-form" action="https://formspree.io/f/xjkozdze" method="POST"></form>
    </div>
  </section>
  <nav class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-content">
      <div class="mobile-menu-header">
        <button class="mobile-menu-close" id="mobileMenuClose">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      
      <div class="mobile-nav-links">
        <a href="index.html" class="mobile-nav-link">Home</a>
        <a href="packages.html" class="mobile-nav-link">Packages</a>
        <a href="index.html#contact" class="mobile-nav-link">Contact</a>
      </div>
    </div>
  </nav>

  <!-- Onboarding Hero (will be shown by JS only if no package specified) -->

  <!-- Onboarding Steps -->
  <section class="section">
    <div class="container">
      <div class="card" style="max-width: 800px; margin: 0 auto; text-align: center;">
        <div style="margin-bottom: var(--space-8);">
          <div style="width: 80px; height: 80px; background: var(--gradient-primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto var(--space-6);">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" style="width: 40px; height: 40px; color: white;">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
          <h2 style="margin-bottom: var(--space-4);">Next Steps</h2>
        </div>
        
        <form id="onboarding-form" action="https://formspree.io/f/xldlollo" method="POST">
          <form id="onboarding-form" action="https://formspree.io/f/xqaljkyp" method="POST">
          <input type="hidden" name="package" id="package-name">
          <div id="steps" style="text-align: left; max-width: 600px; margin: 0 auto;">
            <!-- Steps with input fields will be populated by JavaScript -->
          </div>
          <div style="margin-top: var(--space-8); padding-top: var(--space-8); border-top: 1px solid var(--gray-200);">
            <button type="submit" class="btn btn-primary">Submit Onboarding Information</button>
          </div>
        </form>
        
        <div id="thank-you-message" style="display: none; margin-top: var(--space-8); padding: var(--space-8); background: var(--gray-100); border-radius: var(--radius-lg); text-align: center;">
          <h3>Thank You for Your Submission!</h3>
          <p>Your information has been successfully received. Here's what happens next:</p>
          <div style="max-width: 500px; margin: 20px auto; text-align: left;">
            <ol style="padding-left: 20px;">
              <li style="margin-bottom: 10px;"><strong>Review:</strong> Our team will review your submission within 1 business day.</li>
              <li style="margin-bottom: 10px;"><strong>Initial Contact:</strong> You'll receive an email confirmation with your project details.</li>
              <li style="margin-bottom: 10px;"><strong>Assets Gathering:</strong> Please send any requested files to info@enfoldedmedia.com.</li>
              <li style="margin-bottom: 10px;"><strong>Project Start:</strong> We'll begin working on your project based on the information provided.</li>
            </ol>
          </div>
          <p>If you have any immediate questions, feel free to contact us via WhatsApp or email.</p>
        </div>

        <div style="margin-top: var(--space-8); padding-top: var(--space-8); border-top: 1px solid var(--gray-200);">
          <p style="color: var(--gray-600); margin-bottom: var(--space-4);">Questions about your package?</p>
          <a href="https://wa.me/447836319635?text=Hello%2C%20I%20have%20a%20question%20about%20my%20onboarding" class="btn btn-secondary">Contact Our Team via WhatsApp</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Modern Minimalist Footer -->
  <footer class="modern-minimalist-footer">
    <div class="footer-container">
      <!-- Main Footer Content -->
      <div class="footer-main">
        <!-- Brand Section (Center) -->
        <div class="footer-brand">
          <img src="https://cdn.enfoldedmedia.com/enfolded-images/logo.png" alt="Enfolded Media" class="footer-brand-logo">
          <p class="footer-motto">multilingual. impactful. designed for your audience.</p>
          <!-- Navigation Links -->
          <nav class="footer-nav">
            <a href="index.html" class="footer-nav-link">Home</a>
            <a href="privacy.html" class="footer-nav-link">Privacy Policy</a>
            <a href="packages.html" class="footer-nav-link">Packages</a>
            <a href="index.html#contact" class="footer-nav-link">Contact</a>
            <a href="https://multilingual.click" class="footer-nav-link" target="_blank" rel="noopener noreferrer">Multilingual.click</a>
          </nav>
        </div>
        
        <!-- Social Media Section (Right) -->
        <div class="footer-social">
          <div class="social-icons">
            <a href="https://www.facebook.com/enfoldedteam" class="social-icon" title="Follow us on Facebook" aria-label="Facebook">
              <i class="fab fa-facebook-f"></i>
            </a>
            <a href="https://www.twitter.com/enfoldedteam" class="social-icon" title="Follow us on X" aria-label="X">
              <i class="fa-brands fa-x-twitter"></i>
            </a>
            <a href="https://www.instagram.com/enfoldedteam" class="social-icon" title="Follow us on Instagram" aria-label="Instagram">
              <i class="fab fa-instagram"></i>
            </a>
            <a href="https://www.youtube.com/@enfoldedteam" class="social-icon" title="Follow us on YouTube" aria-label="YouTube">
              <i class="fab fa-youtube"></i>
            </a>
          </div>
        </div>
      </div>
      
      <!-- Copyright -->
      <div class="footer-copyright">
        <p>&copy; <span id="copyright-year">2025</span> Enfolded Media. All rights reserved.</p>
      </div>
    </div>
    
    <!-- Gradient Effect -->
    <div class="footer-gradient"></div>
  </footer>

  <!-- JavaScript -->
  <script src="js/copyright.js"></script>
  <script src="js/onboarding.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Mobile menu functionality only (onboarding form rendering handled by js/onboarding.js)
      const mobileMenuToggle = document.getElementById('mobileMenuToggle');
      const mobileMenu = document.getElementById('mobileMenu');
      const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
      const body = document.body;
      function toggleMobileMenu() {
        const isOpen = mobileMenu.classList.contains('active');
        if (isOpen) {
          mobileMenu.classList.remove('active');
          mobileMenuOverlay.classList.remove('active');
          mobileMenuToggle.classList.remove('active');
          body.classList.remove('menu-open');
        } else {
          mobileMenu.classList.add('active');
            mobileMenuOverlay.classList.add('active');
            mobileMenuToggle.classList.add('active');
            body.classList.add('menu-open');
        }
      }
      if (mobileMenuToggle) mobileMenuToggle.addEventListener('click', toggleMobileMenu);
      if (mobileMenuOverlay) mobileMenuOverlay.addEventListener('click', toggleMobileMenu);
      const mobileMenuClose = document.getElementById('mobileMenuClose');
      if (mobileMenuClose) mobileMenuClose.addEventListener('click', toggleMobileMenu);
      document.querySelectorAll('.mobile-nav-link').forEach(link => {
        link.addEventListener('click', function() {
          if (this.getAttribute('href').startsWith('#')) toggleMobileMenu();
        });
      });
      window.addEventListener('scroll', function() {
        const header = document.querySelector('.modern-header');
        if (window.scrollY > 100) {
          header.style.background = 'rgba(255, 255, 255, 0.98)';
          header.style.boxShadow = '0 4px 6px -1px rgb(0 0 0 / 0.1)';
        } else {
          header.style.background = 'rgba(255, 255, 255, 0.95)';
          header.style.boxShadow = 'none';
        }
      });
    });
  </script>
</body>
</html>